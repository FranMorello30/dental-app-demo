<div class="relative min-h-screen w-full overflow-hidden">
    <div class="relative pt-1 px-8 pb-8">
        <div class="w-full flex justify-end items-center mb-6">
            <button (click)="abrirModalRegistro()" class="primary-btn">
                <mat-icon svgIcon="feather:plus" class="h-5 w-5" />
                Añadir Nuevo Paciente
            </button>
        </div>
        <div class="surface-card overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="table-head">
                        <tr>
                            <th class="px-5 py-3 text-left text-xs font-semibold uppercase tracking-wide">
                                Nombre
                            </th>
                            <th class="px-5 py-3 text-left text-xs font-semibold uppercase tracking-wide">
                                Email
                            </th>
                            <th class="px-5 py-3 text-left text-xs font-semibold uppercase tracking-wide">
                                Teléfono
                            </th>
                            <th class="px-5 py-3 text-left text-xs font-semibold uppercase tracking-wide">
                                Fecha de Nacimiento
                            </th>
                            <th class="px-5 py-3 text-left text-xs font-semibold uppercase tracking-wide">
                                Última Consulta
                            </th>
                            <th class="px-5 py-3 text-left text-xs font-semibold uppercase tracking-wide">
                                Próxima Consulta
                            </th>
                            <th class="px-5 py-3 text-left text-xs font-semibold uppercase tracking-wide">
                                Acciones
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (patient of initialPatients; track patient.id) {
                            <tr class="table-row">
                                <td class="table-cell">{{patient.name}}</td>
                                <td class="table-cell">{{patient.email}}</td>
                                <td class="table-cell">{{patient.phone}}</td>
                                <td class="table-cell">{{patient.date_of_birth}}</td>
                                <td class="table-cell">
                                    {{(patient.last_appointment)}}
                                </td>
                                <td class="table-cell">
                                    <span class="text-gray-500 dark:text-gray-400">No agendada</span>
                                </td>
                                <td class="table-cell">
                                    <div class="flex gap-2">
                                        <button (click)="irPerfil(patient.id)" mat-icon-button class="ghost-icon-btn" title="Ver perfil completo">
                                            <mat-icon svgIcon="feather:user" class="h-4 w-4" />
                                        </button>
                                        <button mat-icon-button class="ghost-icon-btn" title="Ver historial de citas">
                                            <mat-icon svgIcon="feather:calendar" class="h-4 w-4" />
                                        </button>
                                        <button mat-icon-button class="ghost-icon-btn" title="Borrar paciente">
                                            <mat-icon svgIcon="feather:trash" class="h-4 w-4" />
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


@if (isOpenSidebarRegistro) {
    <div   class="fixed inset-0 z-50 flex justify-end" (click)="isOpenSidebarRegistro = false"  @slideInOut >
        <sidebar-registro-patient
            class="w-160 h-full"
            (isClosed)="isOpenSidebarRegistro = false"
            (click)="$event.stopPropagation()"
        />
    </div>
}
