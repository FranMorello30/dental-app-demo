<!-- <div
  class="flex flex-col gap-4 w-full"
  [ngClass]="{ 'overflow-visible h-72': size === 'large', 'overflow-hidden': size !== 'large' }"
> -->
  <!-- Leyenda -->
  <!-- <div class="bg-white/5 rounded-lg p-3 border border-white/10 w-full">
    <h4 class="text-white/80 font-medium mb-2 text-sm">Tratamientos aplicados</h4>
    <div class="flex flex-wrap gap-3">
      <ng-container *ngFor="let treatment of usedTreatments">
        <div class="flex items-center gap-2">
          <div
            class="rounded-full"
            [ngClass]="currentSize.legend"
            [ngStyle]="{ backgroundColor: treatment.color }"
          ></div>
          <span class="text-white" [ngClass]="currentSize.legendText">{{ treatment.name }}</span>
        </div>
      </ng-container>
    </div>
  </div> -->

  <!-- Odontograma -->
  <!-- <div class="flex justify-center w-full ">
    <div [ngClass]="currentSize.container" class="max-w-full max-h-full">
      <div class="flex flex-col items-center"> -->
        <!-- Dientes superiores -->
        <!-- <div class="grid grid-cols-2 gap-2 w-full mb-4">
          <div class="flex justify-end">
            <ng-container *ngFor="let tooth of upperTeeth[0]">
              <div class="flex flex-col items-center" [ngClass]="currentSize.tooth">
                <div
                  class="border-2 rounded-t-lg flex items-center justify-center"
                  [ngClass]="getToothColor(tooth) ? 'border-opacity-70' : 'border-white/20'"
                  [ngStyle]="{
                    borderColor: getToothColor(tooth),
                    backgroundColor: getToothColor(tooth) ? getToothColor(tooth) + '20' : ''
                  }"
                  [class]="currentSize.toothShape"
                >
                  <svg
                    *ngIf="getToothColor(tooth)"
                    [attr.fill]="getToothColor(tooth)"
                    [attr.stroke]="getToothColor(tooth)"
                    [ngClass]="currentSize.circle"
                    viewBox="0 0 24 24"
                  >
                    <circle cx="12" cy="12" r="10" />
                  </svg>
                </div>
                <span class="mt-1 text-white/50" [ngClass]="currentSize.text">{{ tooth }}</span>
              </div>
            </ng-container>
          </div>

          <div class="flex justify-start">
            <ng-container *ngFor="let tooth of upperTeeth[1]">
              <div class="flex flex-col items-center" [ngClass]="currentSize.tooth">
                <div
                  class="border-2 rounded-t-lg flex items-center justify-center"
                  [ngClass]="getToothColor(tooth) ? 'border-opacity-70' : 'border-white/20'"
                  [ngStyle]="{
                    borderColor: getToothColor(tooth),
                    backgroundColor: getToothColor(tooth) ? getToothColor(tooth) + '20' : ''
                  }"
                  [class]="currentSize.toothShape"
                >
                  <svg
                    *ngIf="getToothColor(tooth)"
                    [attr.fill]="getToothColor(tooth)"
                    [attr.stroke]="getToothColor(tooth)"
                    [ngClass]="currentSize.circle"
                    viewBox="0 0 24 24"
                  >
                    <circle cx="12" cy="12" r="10" />
                  </svg>
                </div>
                <span class="mt-1 text-white/50" [ngClass]="currentSize.text">{{ tooth }}</span>
              </div>
            </ng-container>
          </div>
        </div> -->

        <!-- Línea divisoria -->
        <!-- <div class="w-full border-t border-white/10 mb-4"></div> -->

        <!-- Dientes inferiores -->
        <!-- <div class="grid grid-cols-2 gap-2 w-full">
          <div class="flex justify-end">
            <ng-container *ngFor="let tooth of lowerTeeth[0]">
              <div class="flex flex-col items-center" [ngClass]="currentSize.tooth">
                <span class="mb-1 text-white/50" [ngClass]="currentSize.text">{{ tooth }}</span>
                <div
                  class="border-2 rounded-b-lg flex items-center justify-center"
                  [ngClass]="getToothColor(tooth) ? 'border-opacity-70' : 'border-white/20'"
                  [ngStyle]="{
                    borderColor: getToothColor(tooth),
                    backgroundColor: getToothColor(tooth) ? getToothColor(tooth) + '20' : ''
                  }"
                  [class]="currentSize.toothShape"
                >
                  <svg
                    *ngIf="getToothColor(tooth)"
                    [attr.fill]="getToothColor(tooth)"
                    [attr.stroke]="getToothColor(tooth)"
                    [ngClass]="currentSize.circle"
                    viewBox="0 0 24 24"
                  >
                    <circle cx="12" cy="12" r="10" />
                  </svg>
                </div>
              </div>
            </ng-container>
          </div>

          <div class="flex justify-start">
            <ng-container *ngFor="let tooth of lowerTeeth[1]">
              <div class="flex flex-col items-center" [ngClass]="currentSize.tooth">
                <span class="mb-1 text-white/50" [ngClass]="currentSize.text">{{ tooth }}</span>
                <div
                  class="border-2 rounded-b-lg flex items-center justify-center"
                  [ngClass]="getToothColor(tooth) ? 'border-opacity-70' : 'border-white/20'"
                  [ngStyle]="{
                    borderColor: getToothColor(tooth),
                    backgroundColor: getToothColor(tooth) ? getToothColor(tooth) + '20' : ''
                  }"
                  [class]="currentSize.toothShape"
                >
                  <svg
                    *ngIf="getToothColor(tooth)"
                    [attr.fill]="getToothColor(tooth)"
                    [attr.stroke]="getToothColor(tooth)"
                    [ngClass]="currentSize.circle"
                    viewBox="0 0 24 24"
                  >
                    <circle cx="12" cy="12" r="10" />
                  </svg>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> -->

<div class="bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-4">
  <h3 class="text-lg font-medium mb-3">Odontograma</h3>

  <div class="flex flex-col md:flex-row gap-6">
    <!-- Selector de tratamiento -->
    <div class="flex-1">
      <div class="flex flex-wrap gap-2 mb-4">
        <button
          *ngFor="let t of treatments"
          (click)="currentTreatment = t.id"
          class="px-3 py-1.5 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5"
          [ngClass]="{
            'bg-white/20 border-2 border-white/30':
              currentTreatment === t.id,
            'bg-white/10 hover:bg-white/15 border-2 border-transparent':
              currentTreatment !== t.id
          }"
          [style.color]="t.color"
          [style.borderColor]="currentTreatment === t.id ? t.color : 'transparent'"
        >
          <span
            class="w-3 h-3 rounded-full"
            [style.backgroundColor]="t.color"
          ></span>
          {{ t.name }}
        </button>
      </div>

      <p class="text-white/70 text-sm mb-3">
        Seleccione los dientes tratados:
      </p>

      <div class="flex flex-col items-center">
        <!-- superior -->
        <div class="grid grid-cols-2 gap-2 w-full mb-4">
          <div class="flex justify-end">
            <ng-container *ngFor="let tooth of upperTeeth[0]">
              <div class="w-6 h-10 flex flex-col items-center">
                <div
                  class="w-5 h-6 border-2 rounded-t-lg cursor-pointer flex items-center justify-center"
                  [ngClass]="{
                    'border-opacity-70': isToothSelected(tooth),
                    'border-white/20 hover:border-white/40':
                      !isToothSelected(tooth)
                  }"
                  [style.borderColor]="getToothColor(tooth)"
                  [style.backgroundColor]="
                    getToothColor(tooth) + '20'
                  "
                  (click)="handleToothClick(tooth)"
                >
                  <svg
                    *ngIf="isToothSelected(tooth)"
                    class="h-3 w-3"
                    viewBox="0 0 24 24"
                    [attr.fill]="getToothColor(tooth)"
                    [attr.stroke]="getToothColor(tooth)"
                  >
                    <circle cx="12" cy="12" r="10" />
                  </svg>
                </div>
                <span class="text-xs mt-1 text-white/50">{{ tooth }}</span>
              </div>
            </ng-container>
          </div>
          <div class="flex justify-start">
            <!-- idéntico al anterior, pero con upperTeeth[1] -->
            <ng-container *ngFor="let tooth of upperTeeth[1]">
              <div class="w-6 h-10 flex flex-col items-center">
                <div
                  class="w-5 h-6 border-2 rounded-t-lg cursor-pointer flex items-center justify-center"
                  [ngClass]="{
                    'border-opacity-70': isToothSelected(tooth),
                    'border-white/20 hover:border-white/40':
                      !isToothSelected(tooth)
                  }"
                  [style.borderColor]="getToothColor(tooth)"
                  [style.backgroundColor]="
                    getToothColor(tooth) + '20'
                  "
                  (click)="handleToothClick(tooth)"
                >
                  <svg
                    *ngIf="isToothSelected(tooth)"
                    class="h-3 w-3"
                    viewBox="0 0 24 24"
                    [attr.fill]="getToothColor(tooth)"
                    [attr.stroke]="getToothColor(tooth)"
                  >
                    <circle cx="12" cy="12" r="10" />
                  </svg>
                </div>
                <span class="text-xs mt-1 text-white/50">{{ tooth }}</span>
              </div>
            </ng-container>
          </div>
        </div>

        <div class="w-full border-t border-white/10 mb-4"></div>

        <!-- inferior -->
        <div class="grid grid-cols-2 gap-2 w-full">
          <div class="flex justify-end">
            <ng-container *ngFor="let tooth of lowerTeeth[0]">
              <div class="w-6 h-10 flex flex-col items-center">
                <span class="text-xs mb-1 text-white/50">{{ tooth }}</span>
                <div
                  class="w-5 h-6 border-2 rounded-b-lg cursor-pointer flex items-center justify-center"
                  [ngClass]="{
                    'border-opacity-70': isToothSelected(tooth),
                    'border-white/20 hover:border-white/40':
                      !isToothSelected(tooth)
                  }"
                  [style.borderColor]="getToothColor(tooth)"
                  [style.backgroundColor]="
                    getToothColor(tooth) + '20'
                  "
                  (click)="handleToothClick(tooth)"
                >
                  <svg
                    *ngIf="isToothSelected(tooth)"
                    class="h-3 w-3"
                    viewBox="0 0 24 24"
                    [attr.fill]="getToothColor(tooth)"
                    [attr.stroke]="getToothColor(tooth)"
                  >
                    <circle cx="12" cy="12" r="10" />
                  </svg>
                </div>
              </div>
            </ng-container>
          </div>
          <div class="flex justify-start">
            <ng-container *ngFor="let tooth of lowerTeeth[1]">
              <div class="w-6 h-10 flex flex-col items-center">
                <span class="text-xs mb-1 text-white/50">{{ tooth }}</span>
                <div
                  class="w-5 h-6 border-2 rounded-b-lg cursor-pointer flex items-center justify-center"
                  [ngClass]="{
                    'border-opacity-70': isToothSelected(tooth),
                    'border-white/20 hover:border-white/40':
                      !isToothSelected(tooth)
                  }"
                  [style.borderColor]="getToothColor(tooth)"
                  [style.backgroundColor]="
                    getToothColor(tooth) + '20'
                  "
                  (click)="handleToothClick(tooth)"
                >
                  <svg
                    *ngIf="isToothSelected(tooth)"
                    class="h-3 w-3"
                    viewBox="0 0 24 24"
                    [attr.fill]="getToothColor(tooth)"
                    [attr.stroke]="getToothColor(tooth)"
                  >
                    <circle cx="12" cy="12" r="10" />
                  </svg>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>