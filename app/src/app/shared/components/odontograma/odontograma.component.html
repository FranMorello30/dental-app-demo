
<div class="bg-gray-50 rounded-xl border border-gray-200 p-5">
  <h3 class="text-lg font-semibold mb-4 text-gray-900 flex items-center gap-2">
    <mat-icon svgIcon="feather:activity" class="h-5 w-5 text-blue-600" />
    Odontograma
  </h3>

  <div class="flex flex-col md:flex-row gap-8">
    <!-- Selector de tratamiento -->
    <div class="flex-1">
      <div class="flex flex-wrap gap-2 mb-6">
        <button
          *ngFor="let t of treatments"
          (click)="currentTreatment = t.id"
          class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2 shadow-sm"
          [ngClass]="{
            'bg-white ring-2 ring-offset-1': currentTreatment === t.id,
            'bg-white border border-gray-200 hover:bg-gray-50 text-gray-600': currentTreatment !== t.id
          }"
          [style.borderColor]="currentTreatment === t.id ? t.color : ''"
          [style.color]="currentTreatment === t.id ? t.color : ''"
        >
          <span
            class="w-3 h-3 rounded-full shadow-sm"
            [style.backgroundColor]="t.color"
          ></span>
          {{ t.name }}
        </button>
      </div>

      <p class="text-gray-500 text-sm mb-4 font-medium flex items-center gap-1">
        <mat-icon svgIcon="feather:info" class="h-4 w-4" />
        Seleccione los dientes tratados:
      </p>

      <div class="flex flex-col items-center bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
        <!-- superior -->
        <div class="grid grid-cols-2 gap-4 w-full mb-6">
          <div class="flex justify-end gap-1">
            <ng-container *ngFor="let tooth of upperTeeth[0]">
              <div class="w-8 flex flex-col items-center group">
                <div
                  class="w-6 h-8 border-2 rounded-t-lg cursor-pointer flex items-center justify-center transition-all duration-200"
                  [ngClass]="{
                    'border-opacity-100 shadow-md scale-105': isToothSelected(tooth),
                    'border-gray-300 hover:border-gray-400 hover:bg-gray-50': !isToothSelected(tooth)
                  }"
                  [style.borderColor]="isToothSelected(tooth) ? getToothColor(tooth) : ''"
                  [style.backgroundColor]="isToothSelected(tooth) ? getToothColor(tooth) + '20' : ''"
                  (click)="handleToothClick(tooth)"
                >
                  <svg
                    *ngIf="isToothSelected(tooth)"
                    class="h-4 w-4"
                    viewBox="0 0 24 24"
                    [attr.fill]="getToothColor(tooth)"
                    [attr.stroke]="getToothColor(tooth)"
                  >
                    <circle cx="12" cy="12" r="10" />
                  </svg>
                </div>
                <span class="text-[10px] mt-1 text-gray-400 font-medium group-hover:text-gray-600">{{ tooth }}</span>
              </div>
            </ng-container>
          </div>
          <div class="flex justify-start gap-1">
            <!-- idÃ©ntico al anterior, pero con upperTeeth[1] -->
            <ng-container *ngFor="let tooth of upperTeeth[1]">
              <div class="w-8 flex flex-col items-center group">
                <div
                  class="w-6 h-8 border-2 rounded-t-lg cursor-pointer flex items-center justify-center transition-all duration-200"
                  [ngClass]="{
                    'border-opacity-100 shadow-md scale-105': isToothSelected(tooth),
                    'border-gray-300 hover:border-gray-400 hover:bg-gray-50': !isToothSelected(tooth)
                  }"
                  [style.borderColor]="isToothSelected(tooth) ? getToothColor(tooth) : ''"
                  [style.backgroundColor]="isToothSelected(tooth) ? getToothColor(tooth) + '20' : ''"
                  (click)="handleToothClick(tooth)"
                >
                  <svg
                    *ngIf="isToothSelected(tooth)"
                    class="h-4 w-4"
                    viewBox="0 0 24 24"
                    [attr.fill]="getToothColor(tooth)"
                    [attr.stroke]="getToothColor(tooth)"
                  >
                    <circle cx="12" cy="12" r="10" />
                  </svg>
                </div>
                <span class="text-[10px] mt-1 text-gray-400 font-medium group-hover:text-gray-600">{{ tooth }}</span>
              </div>
            </ng-container>
          </div>
        </div>

        <div class="w-full border-t border-gray-200 mb-6 relative">
            <span class="absolute left-1/2 -translate-x-1/2 -top-2.5 bg-white px-2 text-xs text-gray-400 font-medium">BOCA</span>
        </div>

        <!-- inferior -->
        <div class="grid grid-cols-2 gap-4 w-full">
          <div class="flex justify-end gap-1">
            <ng-container *ngFor="let tooth of lowerTeeth[0]">
              <div class="w-8 flex flex-col items-center group">
                <span class="text-[10px] mb-1 text-gray-400 font-medium group-hover:text-gray-600">{{ tooth }}</span>
                <div
                  class="w-6 h-8 border-2 rounded-b-lg cursor-pointer flex items-center justify-center transition-all duration-200"
                  [ngClass]="{
                    'border-opacity-100 shadow-md scale-105': isToothSelected(tooth),
                    'border-gray-300 hover:border-gray-400 hover:bg-gray-50': !isToothSelected(tooth)
                  }"
                  [style.borderColor]="isToothSelected(tooth) ? getToothColor(tooth) : ''"
                  [style.backgroundColor]="isToothSelected(tooth) ? getToothColor(tooth) + '20' : ''"
                  (click)="handleToothClick(tooth)"
                >
                  <svg
                    *ngIf="isToothSelected(tooth)"
                    class="h-4 w-4"
                    viewBox="0 0 24 24"
                    [attr.fill]="getToothColor(tooth)"
                    [attr.stroke]="getToothColor(tooth)"
                  >
                    <circle cx="12" cy="12" r="10" />
                  </svg>
                </div>
              </div>
            </ng-container>
          </div>
          <div class="flex justify-start gap-1">
            <ng-container *ngFor="let tooth of lowerTeeth[1]">
              <div class="w-8 flex flex-col items-center group">
                <span class="text-[10px] mb-1 text-gray-400 font-medium group-hover:text-gray-600">{{ tooth }}</span>
                <div
                  class="w-6 h-8 border-2 rounded-b-lg cursor-pointer flex items-center justify-center transition-all duration-200"
                  [ngClass]="{
                    'border-opacity-100 shadow-md scale-105': isToothSelected(tooth),
                    'border-gray-300 hover:border-gray-400 hover:bg-gray-50': !isToothSelected(tooth)
                  }"
                  [style.borderColor]="isToothSelected(tooth) ? getToothColor(tooth) : ''"
                  [style.backgroundColor]="isToothSelected(tooth) ? getToothColor(tooth) + '20' : ''"
                  (click)="handleToothClick(tooth)"
                >
                  <svg
                    *ngIf="isToothSelected(tooth)"
                    class="h-4 w-4"
                    viewBox="0 0 24 24"
                    [attr.fill]="getToothColor(tooth)"
                    [attr.stroke]="getToothColor(tooth)"
                  >
                    <circle cx="12" cy="12" r="10" />
                  </svg>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>